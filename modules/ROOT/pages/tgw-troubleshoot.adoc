= Troubleshoot Transit Gateway Attachments
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

image:logo-cloud-active.png[xref="deployment-strategies.adoc#cloudhub-deployments", title="CloudHub"]
image:logo-hybrid-disabled.png[xref="deployment-strategies.adoc#hybrid-deployments", title="Hybrid"]
image:logo-server-disabled.png[xref="deployment-strategies.adoc#anypoint-platform-pce-deployments", title="Anypoint Platform PCE"]
image:logo-rtf-disabled.png[xref="deployment-strategies.adoc#anypoint-runtime-fabric-deployments", title="Runtime Fabric"]

These are some of the possible errors you might encounter when attempting to attach to a transit gateway.

== Unable to Attach to a Transit Gateway

If you see the `Resource Share Not Found` error when attempting to attach to the 
transit gateway:

. Verify that the *ID* and *Owner* values that you specified are correct. 
. Verify that the Region matches the Transit Gateway region.
. Click the pencil icon to edit these values.

== Unable to Delete a Transit Gateway Attachement

If the Transit Gateways page doesn’t list any VPCs, but you can’t delete the transit gateway, the transit gateway might be attached to a VPC that belongs to another business group that you don’t have access to.

You will see an error modal "Can't remove this transit gateway" like below:

<<Add screenshot>>

== Unable to View a Transit Gateway

Runtime Manager always adds transit gateways at the root business group level.
To view a transit gateway, you need CloudHub Network Viewer permission.

== Unable to Modify a Transit Gateway

To modify a transit gateway, you need CloudHub Network Admin permission.


== Transit Gateway Status is Unknown

If the status for the transit gateway is `Unknown`, the resource share on AWS has either been disabled or deleted.

Click the *View on AWS* button on the *Transit Gateways* page to resolve the issue on AWS:

_update screenshot_

image::tgw-view-on-aws.png[View on AWS button on the Transit Gateways page]



== VPC Attachment Rejected

If you see the `The attachment was rejected in AWS` error when attempting to attach the VPC to the transit gateway, remove the VPC and reattach it.

See xref:tgw-manage-arm.adoc#remove-an-anypoint-vpc-from-the-transit-gateway[Remove an Anypoint VPC from the Transit Gateway].


== Subnet Already Added to the Route Table

If you see the `This subnet has already been added to this route table` error, add a different
subnet to the table.

== Invalid CIDR Subnet

If you see the `Please enter a single subnet in CIDR notation` error, check that the subnet is in the correct CIDR format.

== Attach VPC Button Is Disabled

If the *Attach VPC* button is disabled, all the VPCs you have access to are already attached to the transit gateway.

== Connections Limit has been reached

If you see the an error like `Connections limit has been reached (max=4, used=4) for the organization`, this means you have consumed all your Network connections entitlements, i.e VPC/VPN licenses. Please contact your account team to purchase additional licenses.

== See Also

* xref:tgw-manage-arm.adoc#remove-a-route-from-the-transit-gateway-route-table[Remove a Route from the Transit Gateway Route Table]
* xref:tgw-manage-arm.adoc#add-routes-to-the-transit-gateway-route-table[Add Routes to the Transit Gateway Route Table]
* xref:tgw-about.adoc#transit-gateway-routing[Transit Gateway Routing]
* https://docs.aws.amazon.com/vpc/latest/tgw/tgw-vpc-attachments.html#transit-gateway-vpc-attch-troubleshooting[Troubleshoot VPC attachment creation^] in the AWS documentation
